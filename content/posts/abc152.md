---
title: 'ABC152'
date: 2020-01-20T06:55:14+09:00
draft: false
toc: false
images:
tags:
    - AtCoder
    - ABC
---

94 分 A~E の 5 完でした。

D に 50 分くらい吸われて死にかけましたが何とか E まで解けました。毎度 C、D あたりで引っかかってる気がします。

問題: https://atcoder.jp/contests/abc152/tasks

成績: https://atcoder.jp/users/mijinko/history/share/abc152

# A

`N==M`かを判定すればいいです。

# B

1. `string(n,c)`で char c を n 個くっつけたものを生成できるので文字列の生成はすぐです。
2. string に対して不等号を使えば辞書順の判定はできるのでこれで終わりです。

# C

1. 「前にある数が全て自分より大きい」ような数の個数を数えればいいです。
2. これは「前にある数の最小値が自分より大きい」ような数と言い換えられます。
3. 先頭から順に見ていく場合、前にある数の集合は 1 つずつ増えていきます。これに合わせて min を更新していけばいいです。

# D

1. 「n 以下の整数で〜」かつ桁に関する情報と来たら桁 dp。当然ですね。
2. 桁 dp あんま書いたことなくて何も分からない…… 桁 dp でググったりしたけど結局どう dp をするのか分からないまま時間が流れます。
3. とりあえず問題文を読んで求めたいものを整理します。先頭が i、最後尾が j なる数の総数が分かれば良さそうです。これを`count[i][j]`という形で持つことにします。
4. 各(i,j)について高速に count を計算できそうです。i が n の最高位より小さかったら〜、等しい時は j が n の一の位より大きかったら〜……
5. そんな複雑なコードでバグらないわけがありません(破滅)。この時点で 50 分が経過し 3 完を覚悟します。
6. ここで 1〜n まで全部見て count を完成させる方法が降って来ます。危なかった。整数 k の最高位と最下位は`s=to_string(k)`として`s[0]`、`s.back()`で取得します。

何を求められると良いか落ち着いて整理したおかげで辛うじて軌道修正できました。

今思えば[この問題](https://atcoder.jp/contests/abc136/tasks/abc136_b)とやることはほぼ同じですね……以前これに殺されかけたのに何故……

# E

1. $n \leq 10^4$ の制約がとても不吉。$O(n^2)$ がギリギリ間に合うくらいです。
2. 問題文をよく読むと$\\{A_i\\}$の lcm を求めろと書いてあります。なのでとりあえず lcm を計算する方法を考えます。
3. lcm の最も素直な計算方法は`lcm(a,b)=a/gcd(a,b)*b`を用いて前から計算していく方法ですが、今回の制約下では明らかに途中でオーバーフローします。今回は$\bmod\ 10^9+7$で答えればいいので途中で余りを取りながら計算して上手くいけばいいのですが、lcm の計算で本当にそんなことをしていいのでしょうか……。「最小公倍数　余り　競プロ」などで調べますがあまりいい情報は得られません。
4. 詰みが見えてきたので実は F の方が簡単説に懸けて順位表を見にいきます。しかし F の正解者数はそこまで多くない一方で E が 700 人近くに解かれていて絶望します。これそんな簡単か……？
5. 700 人も解いてるわけだし実は 3 の方針でいいんじゃないか？という気がしてきてとりあえず実装してみます。しかし当然ダメ……入力例 3 で合いません。終わりです。
6. 実は k を決め打ったりすると良かったりしないか考えます。k を決めた時にそれが"公倍数"であることがそこそこの時間で判定できて、また何らかの単調性があれば二分探索で勝ちです。しかしやはり余りを取る操作と倍数という性質の相性が悪すぎてうまくいきません。
7. ここで突然 lcm を素因数分解の形で保持せよとの天啓が降って来ます(本当はこういう部分をしっかり書くべきなのに何故……)。必要なものは lcm を求めるための素因数分解、素因数分解から数を復元するための累乗、$B_i$を求めるための mod 逆元ですが、これらは幸い全てライブラリにあります。ライブラリに感謝。残り 6 分くらいに提出して何とか滑り込みます。

通常の lcm の計算がダメだと気付いた時に別の計算方法がないかすぐに考えるべきでした。

# F

時間がありません。
